# 1 单个策略
     ┌──> 历史相关性 -> 信息 -> 微小的概率优势
数据 ┼
     └──> 随机运动 -> 噪声 -> 无概率优势


# 2 统计效应
一点点概率优势 -> 多个策略叠加 -> 稳定的统计效应显现
比如 一个机构有50-100个交易规则 20-30个品种


# 3 额外人工干预
1 无任何理论区分 震荡 和 趋势 行情
趋势策略 在 震荡行情 会亏损
震荡策略 在 趋势行情 会亏损
因此配比非常重要
趋势策略  震荡策略
60-70%   30-40%
有时候需要人工调整配比 以 匹配市场行情

2 做多同时 也 做空 
这两个策略叠加在一起是赚钱的


# 4 时序数据归一化
将任何指标 缩放至 0-1 之间
1 均值不变
2 方差不变
常见的方法是除以波动率

# 5 交易规则分类
1 线性模型
2 机器学习 深度学习 自构建特征 自动筛选特征


# 5.1 为什么是线性模型
只有线性规律 才能稳定生成统计规律
非线性模型 你无法知道模型的复杂度 因此你无法确定 它学习到了什么分布
因子值(指标值) -> 交易规则 -> 二元分类 (做多 or 做空)
这个二元分类的值的分布符合伯努利分布 正态分布

# 5.2 另一个原因是需要撑过回撤
资金流向 -> 趋势分布 -> 复现历史统计规律 杜绝过拟合 时间平移不变性 确定性来源 -> 撑过回撤
如果你不确信你的模型是否可以复现统计规律 那么你如何确信它能撑过回撤


# 5.5 时间平移不变性的指标
去过拟合 防止随时间而失效
1 rsi
2 z-score
3 bolling
4 波动率比例
5 资金面
6 小市值策略

# 6 通过 回测 扫描超参数(枚举)
穷举所有参数组合
参数a (0-1) step 0.05 = 21 
参数b (0-1) step 0.1 = 11 
共  21 x 11 = 231 个组合
假设每个组合 5 min
使用 4 个线程
则
需要 231 x 5 / 4  = 288min = 4.8h


# 7 通过指标筛选好的规则
1 pnl 曲线

2 夏普比率 - 参数 坐标图
查看是否有明显模式 即参数趋近某一值后整体水平上升突起(参数高原)
否则换规则 换 市场数据

3 稳定性
胜率        盈亏比           
高          低              风险不可控 (类似抛硬币取决于谁的资金量大)
低          高              趋势策略 (回撤大)
40-60%      大于1(1.1,1.2)  震荡策略


# 8 去过拟合
分 测试集 训练集

# 9 添加限制条件 通过相关性 过滤大概率亏损交易
如
每笔交易盈亏 - rsi(限制条件) 坐标图
按照rsi进行升序排序
查看是否存在某种规律 分割线 左右赚钱概率有明显不同